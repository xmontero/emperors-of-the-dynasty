Emperors of the Dynasty
=======================

* **Emperors of the Dynasty** is an n-player game.
* Each played game represents a tournament, sometimes also called a battle or a combat.
* Tournaments happen in different battlefields.
* In each tournament, a player controls one Emperor and a few pawns (typically 4) over a tiled board, playing against several other players.
* A player controls a Dynasty of Emperors. When a game starts, the player chooses one of the Emperors of his Dynasty. The player can hold several simultaneous games. But an Emperor can only be used in one tournament at a time.
* At the end of the tournament, an Emperor can:
  * **Survive,** and the player gets it ready for another tournament.
  * **Be captured** by an opponent, in which case the Emperor leaves his current Dynasty and joins the one of the other player.
  * **Die,** and it's lost forever.
* The user can always create as many Emperors as he needs, at no cost for the Dynasty.

Game goal
=========

Regular players
---------------

* The goal of a regular player is to build the maximum possible reputation for its Dynasty over the time, first training his Emperors and then participating in as many tournaments as possible, and -of course- winning them.
* At a single point of time, the world-champion is the player that has the highest reputation in his Dynasty.
* Strategies can vary from having a few Emperors with a lot of reputation to having many Emperors with fewer reputation.

Casual players
--------------

* A casual player plays a battle with 1 anonymous Emperor and a few pawns but do not get a Dynasty.
* This can be used for training, or just playing for fun. Works much similar to the "Training" tournaments for the regular players.
* The goal for a casual player is just win the tournament he is playing in.

The board
=========

* A balltefield is represented by a tiled board.
* There are many board shapes and sizes.

Example of a 4-player game
--------------------------

This represents a possible starting formation for a 4-player game in a small board.

* Letters a, b, c and d represent 4 Dynasties, each controlled by one of the 4 players.
* The letters in parentheses (a), (b), (c) and (d) are the Emperors of the Dynasties.
* The letters without parentheses are the pawns.

<pre>
            +---+
            |(a)|
    +---+---+---+---+---+
    |   | a | a | a |   |
    +---+---+---+---+---+
    | d |   | a |   | b |
+---+---+---+---+---+---+---+
|(d)| d | d |   | b | b |(b)|
+---+---+---+---+---+---+---+
    | d |   | c |   | b |
    +---+---+---+---+---+
    |   | c | c | c |   |
    +---+---+---+---+---+
            |(c)|
            +---+
</pre>

Example of an 8-player game
---------------------------

This represents a possible starting formation for an 8-player game in a medium-sized board.

<pre>
            +---+               +---+
            |(a)|               |(b)|
        +---+---+---+---+---+---+---+---+
        | a | a | a | a | b | b | b | b |
    +---+---+---+---+---+---+---+---+---+---+
    | h |   |   |   |   |   |   |   |   | c |
+---+---+---+---+---+---+---+---+---+---+---+---+
|(h)| h |   |   |   |   |   |   |   |   | c |(c)|
+---+---+---+---+---+---+---+---+---+---+---+---+
    | h |   |   |   |   |   |   |   |   | c |
    +---+---+---+---+---+---+---+---+---+---+
    | h |   |   |   |   |   |   |   |   | c |
    +---+---+---+---+---+---+---+---+---+---+
    | g |   |   |   |   |   |   |   |   | d |
    +---+---+---+---+---+---+---+---+---+---+
    | g |   |   |   |   |   |   |   |   | d |
+---+---+---+---+---+---+---+---+---+---+---+---+
|(g)| g |   |   |   |   |   |   |   |   | d |(d)|
+---+---+---+---+---+---+---+---+---+---+---+---+
    | g |   |   |   |   |   |   |   |   | d |
    +---+---+---+---+---+---+---+---+---+---+
        | f | f | f | f | e | e | e | e |
        +---+---+---+---+---+---+---+---+
            |(f)|               |(e)|
            +---+               +---+
</pre>

2-player game but with 8 pawns per player
-----------------------------------------

<pre>
        +---+
        |(a)|
+---+---+---+---+---+
| a | a | a | a | a |
+---+---+---+---+---+
|   | a | a | a |   |
+---+---+---+---+---+
|   |   |   |   |   |
+---+---+---+---+---+
|   | b | b | b |   |
+---+---+---+---+---+
| b | b | b | b | b |
+---+---+---+---+---+
        |(b)|
        +---+
</pre>

Example of a 3-player irregular-shaped battlefield with a treasure (x) in the middle
------------------------------------------------------------------------------------

<pre>
            +---+
            |(a)|
    +---+---+---+---+---+---+
    |   | a | a |   |   |   |
+---+---+---+---+---+---+---+---+
|   |   | a | a |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+---+---+
|   |   |   |   |   |   |(x)|   |   |   | b |   |
+---+---+---+---+---+---+---+---+---+---+---+---+---+
|   |   | c |   |   |   |   |   |   |   | b |   |   |
+---+---+---+---+---+---+---+---+---+---+---+---+---+
    | c | c | c |   |   |   |   |   | b | b |   |   |
    +---+---+---+---+---+---+---+---+---+---+---+---+
        |(c)|                           |(b)|
        +---+                           +---+
</pre>

The goal of a single combat
===========================

The goal in a single combat may differ from battle to battle. It dependens on several factors.

Examples of possible goals could be:
* Enter the opposite square with your Emperor.
* Take all the rival Emperors.
* Survive at least 20 moves with more than 3 pieces.
* Take any rival Empreror that has more experience than yours.
* Take the oposite rival Empreror with a single move of your Emperor.
* etc.

The moves
=========

* The pieces move up and down, and left and right. But never in diagonal nor in a knight move, etc.

Pawn moves
----------

* In the first move, all the pawns have "1" of experience, and can move 1 square far.
* Each time a player moves a pawn, that particular piece earns +1 of experience.
* The second time a player moves a pawn (with 2 of experience), the pawn can move 2 squares away.
* In general, a pawn can move "n" blocks away if it has "n" of experience.

Emperor moves
-------------

* The Emperor also has experience, and at the beginning of the battle it also has "1" of experience.
* As the pawns, the Emperor moves up and down, left and right as far as "n" tiles, if he has "n" of experience.
* But differently to the pawns, the experience of the Emperor does not grow by his moves.
* The experience of the Emperor is always "the maximum" of the experiences of his pawns.
* For example if you have 4 pawns with 2, 3, 7 and 2, then your emperor has "7" of experience.

The gameplay
============

* The Emperors of the Dynasty gameplay consists in all players moving simultaneusly.
* Each player submits its movement and once all the opponents have also moved, the new formation is disclosed to all the players.

The following movements are possible:

* Imagine n players. Let's call players A, B and C.
* If player A moves a piece to a destination tile T then it can happen (each move has a name):
  * Tile T is empty pre-move.
    * **Free:** If no other player wants to move there, then A can move there.
    * **Conflict:** If any other player wants to move there, there is a conflict and the movement is cancelled.
      * Depending on the gameplay, different policies of cancellation can apply. Examples:
        * **Rollback:** The pieces of all conflicting players go back to the original place.
        * **Bounce:** The pieces of all players do not reach the destination tile T, but advance as near to it as they can.
        * **Rollback and stay:** The pieces of all players go back to the original place, except for the one that did submit the quickest movement, which reaches the tile T.
        * etc.
  * Tile T (pre-move) contains a piece of another player (for example player B)
    * **Escape:** If player B moves away from that position, the tile T becomes free and A reaches that destination.
    * **Take:** If player B does not move and stays there, then player A "takes" the piece of player B. This will result in the taking piece to bounce back to a free tile, as a single tile cannot hold two pieces (the taker and the taken).
    * **Take at bounce:** If player B moves away, but it is rolled back or bounced to the original position, then player A "takes" player B. Ie: Rollbacks and bounces takes place prior to "taking" opposite's pieces.

Conflicts
=========

The policy to resolve conflicts ("rollback", "bounce", "rollback and stay", "bounce and stay" or whichever other) will be anounced previous to a tournament to all the players, along with the exact set of rules it is used to determine the position of the pieces post-conflict.

Taking pieces
=============

Pawn over pawn
--------------

* When a pawn of the Dynasty A takes a pawn of the Dynasty B, then the captured piece is not removed from the board, but it's reconverted to the Dyansty A so it's now controlled by the capturer player.
* Capturing experience: Nevertheless, when this happens, both pawns, capturer and captured, reset their experience to 1.
* Capturing bounce: The position of the capturer is "bounced" to the nearest free tile post-move in the path he traced.
* One exception is made: if there are no free tiles in all the traced path, the capturer still gets placed in his original tile even if post-move is occupied by another moving player, but it then is captured by the opponent going there.

### Example 1, normal take
* Playing Dynasties are A, B and C.
* A captures B, but C moves in a tile in the middle.

Pre-move (current map)
<pre>
+---+---+---+---+---+
|   | b |   |   |   |
+---+---+---+---+---+
|   |   | b |   |   |
+---+---+---+---+---+
| c |   |   |   |   |
+---+---+---+---+---+
|   |   |   |   |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
</pre>

Move (desired)
* A goes for B.
* B moves a different pawn, so the captured one does not escape.
* C moves to a place in the middle of the path of traced by A.

<pre>
+---+---+---+---+---+
| b---* |   |   |   |
+---+---+---+---+---+
|   |   |b a|   |   |
+---+---+--|+---+---+
| *------c ||   |   |
+---+---+--|+---+---+
|   |   |  ||   |   |
+---+---+--|+---+---+
|   |   |  *|   |   |
+---+---+---+---+---+
</pre>

Post-move (result)
* A captures B, thus B is now part of the A Dynasty.
* C reaches his destination, as was both a free tile pre-move and post-move.
* Capturer A bounces back. As the tile just down (post-move) is occupied by C, still goes back.

<pre>
+---+---+---+---+---+
| b |   |   |   |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
|   |   | c |   |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
|   |   |   |   |   |
+---+---+---+---+---+
</pre>

### Example 2, bounce to a conflicted tile
* Playing Dynasties are A, B, C and D.
* A captures B.
* C and D conflict in the path.
* Conflict resolution follows the "rollback" policy.

Pre-move (current map)
<pre>
+---+---+---+---+---+
|   | b |   |   |   |
+---+---+---+---+---+
|   |   | b |   |   |
+---+---+---+---+---+
| c |   |   | d |   |
+---+---+---+---+---+
|   |   |   |   |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
</pre>

Move (desired)
* A goes for B.
* B moves a different pawn, so the captured one does not escape.
* C and D both move to a place in the middle of the path of traced by A.

<pre>
+---+---+---+---+---+
| b---* |   |   |   |
+---+---+---+---+---+
|   |   |ba |   |   |
+---+---+-|-+---+---+
| *------c|d--* |   |
+---+---+-| +---+---+
|   |   | | |   |   |
+---+---+-|-+---+---+
|   |   | * |   |   |
+---+---+---+---+---+
</pre>

Post-move (result)
* A captures B, thus B is now part of the A Dynasty.
* C and D conflict so they are rolled back. Rollbacks take place before capturing.
* Capturer A bounces back. As the tile just down is free thanks to the rollback, it goes there.

<pre>
+---+---+---+---+---+
| b |   |   |   |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
| c |   | a | d |   |
+---+---+---+---+---+
|   |   |   |   |   |
+---+---+---+---+---+
|   |   |   |   |   |
+---+---+---+---+---+
</pre>

### Example 3, bounce yields in being captured
* Playing Dynasties are A, B, C, D and E.
* A captures B.
* But C, D and E occupy all the way, so A bounces to the original position and gets captured by E.

Pre-move (current map)
<pre>
+---+---+---+---+---+
|   | b |   |   |   |
+---+---+---+---+---+
|   |   | b |   |   |
+---+---+---+---+---+
| c |   |   |   |   |
+---+---+---+---+---+
|   |   |   | d |   |
+---+---+---+---+---+
| e |   | a |   |   |
+---+---+---+---+---+
</pre>

Move (desired)
* A goes for B.
* B moves a different pawn, so the captured one does not escape.
* C and D move to a place in the middle of the path of traced by A.
* E moves to the original A position.
* Note that as all moves are simultaneous, E does not know the intentions of players C and D, so chances are that if neither C or D moved exactly there, A could escape from E.

<pre>
+---+---+---+---+---+
| b---* |   |   |   |
+---+---+---+---+---+
|   |   |b a|   |   |
+---+---+--|+---+---+
| *------c ||   |   |
+---+---+-/-+---+---+
|   |   || d--* |   |
+---+---+-\-+---+---+
| *------e *|   |   |
+---+---+---+---+---+
</pre>

Post-move (result)
* A captures B, thus B is now part of the A Dynasty.
* C and D reache their destination - free tiles pre- and post-move.
* Capturer A bounces back.
* As the tile just down (post-move) is occupied by C, still goes back.
* As the tile just down C (post-move) is occupied by D, still goes back.
* As the tile now is its original, even occupied by E, A is placed there. So when E encounters A, E captures A.
* Capturing A is reconverted to the E dynasty.
* Capturer E bounces one squre back in its path.

<pre>
+---+---+---+---+---+
| b |   |   |   |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
|   |   | c |   |   |
+---+---+---+---+---+
|   |   | d |   |   |
+---+---+---+---+---+
|   | e | e |   |   |
+---+---+---+---+---+
</pre>

Iterative bouncing
------------------

* The order in which the moves are analyzed are:
  1. All pieces moved to a free tile are "fixed" there.
  2. All pieces conflicting are rolled back (either to the original position, or to shorter distances, depending on the rollback mode).
  3. All pieces doing a take, perform the capture and bounce to a free tile or to it's original place.
  4. Bounce destination is "proposed" as a move, and then the system processes all again, iteratively until a stable solution is found.

### Example 4, iterative bouncing
* Playing Dynasties are A, B, C, D.
* A captures B, and bounces back to a free tile.
* C captures D, and bounces back to a free tile.
* Bounced A and bounced C do conflict.
* In this game, conflict rules are "bounce".

Pre-move (current map)
<pre>
+---+---+---+---+---+
|   | b |   |   |   |
+---+---+---+---+---+
|   |   | b |   |   |
+---+---+---+---+---+
| c |   |   | d |   |
+---+---+---+---+---+
|   |   |   | d |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
</pre>

Move (desired)
* A goes for B.
* B moves to a free tile.
* C goes for D.
* D moves to a free tile.

<pre>
+---+---+---+---+---+
| b---* |   |   |   |
+---+---+---+---+---+
|   |   |a b|   |   |
+---+---+|--+---+---+
| *------|---c d|   |
+---+---+|--+---+---+
|   |   || d--* |   |
+---+---+|--+---+---+
|   |   |*  |   |   |
+---+---+---+---+---+
</pre>

Move (iteration 1, temporal)
* Step 1. Both B and D move to a free tile, so they are fixed there.
* Step 2. There are no conflicts in this iteration. Conficts occur when post-move two pieces are in the same tile that pre-move was a free-tile.
* Step 3. A captures B so B is converted to the Dynasty A. Capturer A bounces back. The tile is free. It's a "proposed destiantion".
* Still in Step 3. C captures D so D is converted to the Dynasty C. Capturer C bounces back. The tile is occupied by A bouncing but as moves are simultaneus, no logic says that A or C should take precedence on that square, so it's assumed that A is there as "proposed", not as "fixed" and also C tries to go there as the result of bouncing.

<pre>
+---+---+---+---+---+
| b |   |   |   |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
| *------c a| c |   |
+---+---+-/-+---+---+
|   |   || d|   |   |
+---+---+|--+---+---+
|   |   |*  |   |   |
+---+---+---+---+---+
</pre>

Post-move (iteration 2, result)
* Capturer A and C do conflict once bounced.
* As conflict rules are also "bounce", C is proposed 1 left, and A is proposed 1 down.
* Proposed tile for C is free, so C is "fixed" there.
* Proposed tile for A is occupied by the moving D, which was fixed in a previous iteration, so A still bounces one more, and gets back to its initial position.

<pre>
+---+---+---+---+---+
| b |   |   |   |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
|   | c |   | c |   |
+---+---+---+---+---+
|   |   | d |   |   |
+---+---+---+---+---+
|   |   | a |   |   |
+---+---+---+---+---+
</pre>

Tip on bounces related with taking
----------------------------------

* One can think of the traced path, as a spring.
* If the piece finds a free tile, it's "fixed" and the spring is broken, so no "force" is applied to get back to its original position.
* If the piece does not find a free tile (capture, conflict, etc) then the spring acts softly pulling the piece back thru the traced path tile by tile; except in the case of conflict + rollback policy that acts as a super-spring moving the piece to the origin directly.

Taking pieces that involve the Emperor
--------------------------------------

* If the game does not state other rules, then the same rules than "pawn over pawn" apply.
* Nevertheless typically the game will state specific rules for those situations.

### Emperor over pawn

* Example of possible rules of Emperor over pawn:
  * If an Emperor takes a pawn, then the Emperor is the one than occupies the destination tile, and the reconverted pawn is pushed further in the same direction than the Emperor charged.
  * If an Emperor takes a pawn, when bouncing, it takes precedence over any other pawn, yielding in that the Emperor always will occupy the nearest square to the one used for taking the oposite pawn.
  * When taking a pawn, the emperor's pawn of highest reputation will be reset to 1.
  * etc.

### Pawn over Emperor

* Example of possible rules of pawn over Emperor:
  * The Emperor taken is killed.
  * The Emperor taken is not killed, but is adhered to the Dynasty of the taking player, and removed from the board.
  * The same as above but, instead of removing the piece, it's substituted by a pawn of experience 1 of the Dynasty that is winning the take.
  * The same as above but with the experience of the captured Emperor.
  * etc.

### Emperor over Emperor

* Example of possible rules of Emperor over Emperor:
  * The taking Emperor gets the reputation of the taken Emperor, but the taken Emperor still remains in its original Dynasty.
  * The taken Emperor is reconverted to the taking Dynasty only for this combat, but afterwards, each player conserves his emperors.
  * The taken Emperor is permanently reconverted to the takin Dynasty and this change persists after this combat, so the player lost its Emperor in the world-ranking.
  * etc.

The experience
==============

* Each piece has a level of experience.
* The combat starts with all the experiences at level 1.
* As the time elapses and the game moves, experiences typically grow, but can also decrease (as for example when capturing).
* The experience is not persistent across combats, and the earned experience within a combat is local to that combat. If an emperor survives and the same emperor starts another combat, it will start from 1 again.

The reputation
==============

* The pawns do not have any reputation at all.
* The Emperors have personal instransferible reputation.
* Also do the Dynasties.

The reputation of an Emperor
----------------------------

* After a combat, the Emperors that survive will earn or loose a certain level of reputation.
* The reputation persists across combats.
* For example, an Emperor with reputation 490 starting a combat, will start the combat with "reputation 490".
* Having a level of reputation does not give any advantage to the opponents.
* During the combat, certain events can happen that grant new reputation level or retrieves certain amount of reputation of a certain Emperor. Maybe that Emperor that initiated with 490, ends -alive- with 515.
* If that happens, then the Emperor goes to sleep to his palace with that level and remains at that level.
* Inactive Emperors (the ones that do not go to battles) can suffer of events that change their reputation. For example, if he is getting old and never goes out to battles, others could think he is affraid of his weakness and his reputation could lower.

The reputation of the Dynasty
-----------------------------

* The reputation of a Dynasty is the sum of all the reputations of all the Emperors that have not died.
* The reputation of the Dynasty grows when the Emperors pertaining to it grow their own reputation.
* The reputation of the Dynasty also grows when in a tournament, the player took a new Emperor from a competitor Dynasty and adhered to it.
* The reputation of the Dynasty lowers when the Emperors lower their own reputation.
* The reputation of the Dynasty also decreases if an Emperor gets taken by a competitor during a battle, and joins a different Dynasty.
* The reputation of the Dynasty can lower also if an Emperor dies.

The wealth of the Dynasty
=========================

* Each Dynasty has a certain level of wealth.
* The wealth can be composed of coins of several types, as well as gemstones and precious metals.
* The wealth can be exchanged between players to buy certain items, like keys for certain battlefields.
* The Emperors can go to a battlefield to bet for another Emperor instead of playing the game for themselves.
* The wealth of a Dynasty can raise if the Emperor playing earns wealth in the battle, or if an Emperor that is betting wins the bet.
* The wealth of a Dynasty can decrease if the Emperor looses a battle or looses a bet that he placed on another Emperor that was playing.
* In contraposition to the reputation which is particular of each Emperor... the wealth does not belong to an individual but to the Dynasty in a whole.
* An Emperor can only bet as a maximum the wealth of the Dynasty. No negative numbers allowed.

Logging
=======

* Normally the system will log all the events that happen, as for example:
  * When an Emperor fights, the fieldname, who are the contendats, who wins.
  * When an Emperor grows or reduces his reputation and why.
  * When a Dynasty raises its wealth or looses it.
  * When an Emperor is born or when it dies.
* Some events are private: For example the wealth changes could be private in some cases.
* Specially for the reputation of the Dynasty, the information is public, so any player can explore the competitor's Dynasty log and understand how many Emperors it is composed of, and how, hystorically, the Dynasty has built its reputation over the time.
* Emperors that are born and die without participating in any serious tournament, get deleted from the log (do not make history).

The tournament types
====================

* When a player chooses an Emperor to play in a combat it can typically be of 5 types:
  * **Training:**
    * The play is ignored at all effects.
    * Nothing is logged. Even there is no registry for that Emperor playing in that field at that time.
    * It's perfect for "trying" strategies without recording trace of it.
    * No reputation changes
    * No wealth changes.
    * The Emperors cannot die.
    * The Emperors cannot be adhered to a competitor's Dynasty.
    * This mode is mainly for beginners, and also for experienced users when playing with other users, to create friendly tournaments where there is nothing to loose.
    * Intended to give to the player a chance to spend time playing enjoying without worrying about the results.
  * **For a gift:**
    * Winning represents earning wealth and/or reputation.
    * Loosing does not have any counterparts.
    * Rules are tournament-specific.
  * **By honour:**
    * The players bet certain number of points of reputation.
    * Winning earns reputations. But loosing looses reputation.
    * Rules are tournament-specific.
  * **Conquer:**
    * The captured Emperor leaves its current Dynasty and joins the Dynasty controlled by the player that captures.
    * This is a quick way to earn all the reputation of that captured opponent Emperor. Or loosing yours if it's captured by an opponent!
  * **To the death:**
    * It is the most serious tournament: When an emperor is captured, it is killed, so the player being taken will loose the Emperor, as well as its reputation in the Dynasty.
    * The killer Emperor earns the reputation of the killed Emperor.
    * Upon finishing the battle, the Dynasty log will reflect the death.
    * It is the kind of battles that arise the most expectation and the highest transactions in betting.

Variants
--------

* Appart from the previous generic types, any tournament can define its own set of rules.
* For example, for a 4-player tournament, it could have the following set of rules:
  * 4 chests are placed over the board, one for each Dynasty.
  * Every Emperor is requestested to put a certain amount of wealth inside its chest, for example something between 100 and 1000 golden coins.
  * No player knows the quantity that the others are putting there.
  * Emperors capturing a chest earn its content, and the Dynasty that put the content, looses that wealth.
  * To avoid the Dyansties to put the minimum amount, the reputation of the Emperor that puts the maximum captured wealth raises by a certain agreed number of points (by being generous), and the one putting the minimum captured wealth in the game decreases by the same amount of reputation points (by being stingy).
  * If a chest is not captured, its content is not known so the reputation is not affected.
